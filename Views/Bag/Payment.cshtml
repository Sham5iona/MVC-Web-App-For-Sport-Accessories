﻿@using Sport_Accessories.ViewModels;
@model PaymentViewModel;
@{
    ViewData["Title"] = "Payment";
    Layout = null;
}

<html>

<head>
    <title>Payment</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="~/css/EditUser.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

</head>

<body>

    <div class="container">
        <h2>Payment</h2>
        <a class="btn-link" style="font-size:20px;" asp-action="Index" asp-controller="Home">
            Return to home page
        </a>

        <br />
        <form method="post" asp-action="Pay">

            <h4><div class="text-danger" asp-validation-summary="ModelOnly"></div></h4>
            <div class="form-group">
                <label asp-for="Address">Address</label>
                <input type="text" asp-for="Address" class="form-control" id="text" placeholder="Enter an adress">

                <h4 class="text-danger" role="alert">
                    <span id="error" asp-validation-for="Address"></span>
                </h4>

            </div>


            <div class="form-group">
                <label asp-for="PhoneNumber">Customer's phone number</label>
                <input type="text" class="form-control" id="text" placeholder="Enter phone number" asp-for="PhoneNumber">
                <h4 class="text-danger" role="alert">
                    <span asp-validation-for="PhoneNumber"></span>
                </h4>
            </div>


            <h2 id="totalPrice">Total price: @Model.TotalPrice </h2>

            <button type="submit" class="btn btn-primary">Pay here</button>

        </form>
    </div>



</body>
</html>
<script>
    $(document).ready(function () {
        // Get the count input element
        var countInput = $('#count');

        // Get the count value display element
        var countValue = $('#countValue');

        // Get the increment button
        var incrementButton = $('#incrementCount');

        // Get the total price display element
        var totalPriceElement = $('#totalPrice');

        // Initial total price
        var totalPrice = @Model.TotalPrice;

        // Add click event listener to the increment button
        incrementButton.click(function () {
            // Get the current count value
            var currentCount = parseInt(countInput.val()) || 0;

            // Increment the count by 1
            currentCount++;

            // Update the count input value
            countInput.val(currentCount);

            // Update the displayed count value in the <h3> element
            countValue.text('Count: ' + currentCount);

            // Update the total price
            var updatedTotalPrice = totalPrice * currentCount;
            totalPriceElement.text('Total price: ' + updatedTotalPrice.toFixed(2)); // Assuming totalPrice is a decimal
        });
    });
</script>